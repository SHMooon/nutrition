---
title: "Reduce Sugar Consumption"
author: "Karin Altvater, Santosh Bhandari, Patrick Frey, Sanghyo Moon"
date: "2023-06-23"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Sugar Sweetened Beverages (SSBs)

- soft drinks, energy drinks, fruit nectar drinks etc. 
- many associated health issues
--> decrease life quality of individual people
--> burden on the public health system 


## SSB tax

- to internalize the external costs of high sugar consumption 
- higher prices of SSBs -> lower consumption: proven for several countries 
- tax returns can be reinvested in health sector


## Countries with SSB tax

```{r ,include=F, echo=F}
library(tmap)
data(World)
library(readxl)
library(raster)
library(sp)

SSB_Tax_Database_Feb23 <- read_excel("Sanghyo/SSB-Tax-Database-Feb23.xlsx")
SSB_World <- merge(World, SSB_Tax_Database_Feb23, by.x="iso_a3", by.y="wb_code")

A <- tm_shape(World)+
  tm_polygons()+
  tm_shape(SSB_World)+
  tm_polygons("SSB-Tax")+
  tm_layout(main.title = "Countries with SSB -Tax",
            main.title.position = "center",
            main.title.color = "#003333")+
  tm_text(text = "iso_a3", size = 0.2)

```

```{r }
A
```

  As we can see, there is no SSB tax in Germany.

## Decision

### Decision: Introduction of a tax on SSBs in germany
### Decision maker: German government 


## Our Modell
```{r ,include=F, echo=F}
# load packages ####
library(decisionSupport)
# install.packages("DiagrammeR")
library(DiagrammeR)

B <- grViz("digraph {
compound=true
graph[layout = dot, rankdir = LR]
node[style = filled, margin = 0.1, fillcolor = 'azure', shape = rectangle]


tax       [label = 'Sugar tax for SSB']
tax -> cultivation_sugarbeet[lhead = cluster_assumptions]


subgraph cluster_assumptions { 
      graph[rankdir = LR, label = 'Assumptions',
            fontsize = 28, shape = rectangle, style = dashed,
            fontcolor = grey]

      subgraph cluster_economic { 
      graph[rankdir = TD, label = 'Economic',
            fontsize = 28, shape = rectangle, style = dashed,
            fontcolor = grey, color = orange]

      cultivation_sugarbeet [label = 'Decreased sugar beet cultivation']
      turnover_sugarbeet    [label = 'Decreased turnover of sugar beets']
      
      cultivation_sugarbeet -> turnover_sugarbeet
      }
      
      subgraph cluster_ecologic { 
      graph[rankdir = TD, label = 'Ecologic',
            fontsize = 28, shape = rectangle, style = dashed,
            fontcolor = grey, color = green]

      area          [label = 'Increased areas for sustainable cultivations']
      soil          [label = 'changed soil properties']
      }
      
      subgraph cluster_social { 
      graph[rankdir = TD, label = 'Social',
            fontsize = 28, shape = rectangle, style = dashed,
            fontcolor = grey, color = blue]

      demo          [label = 'Demonstration against the tax']
      gab           [label = 'Increases gab between poor and rich']
      }
      
      subgraph cluster_health { 
      graph[rankdir = TD, label = 'Health',
            fontsize = 28, shape = rectangle, style = dashed,
            fontcolor = grey, color = red]

      red_sugar           [label = 'Reduced Sugar consumption']
      obecity             [label = 'less obecity']
      
      red_sugar -> obecity
      }
      

Other_factors 

obecity, turnover_sugarbeet, area, soil, demo, gab, Other_factors -> Calculation

}

Calculation -> NPV


}")



# ipnut model with grViz ####
# presented: 16th of June 2023 

model_patrick <- grViz("digraph {
  
graph[layout = dot, rankdir = LR]
node[style = filled, margin = 0.1, fillcolor = 'azure']


I   [label = 'Input for Decision']
pos [label = 'Positiv Support', fillcolor = 'green']
neg [label = 'Negativ Support', fillcolor = 'red']

sh  [label = 'Stakeholder', shape = rectangle]
res [label = 'Results of Countries', shape = rectangle]

gov [label = 'Goverment', shape = rectangle]
ind [label = 'Individuals', shape = rectangle]
sm [label = 'Supermarkets', shape = rectangle]
man [label = 'Manufactories', shape = rectangle]

rs  [label = 'Research', shape = rectangle]

gov, ind, sm, man -> sh -> pos, neg
rs -> res
res -> pos, neg 
pos, neg -> I

}")
```

```{r, echo=F}
B
```
